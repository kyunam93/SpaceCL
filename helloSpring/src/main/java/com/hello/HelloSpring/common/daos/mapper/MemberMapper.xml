<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hello.helloSpring.common.daos.MemberDao">

	<select id="selectMember" parameterType="com.hello.helloSpring.common.bean.MemberBean"
	resultType="com.hello.helloSpring.common.bean.MemberBean">
		SELECT 
			member_no AS memberNo
			, id
			, pw
			, name
			, email
			, addr
			, birthdate
			, hp
			, reg_dt AS regDt
			, last_login_dt AS lastLoginDt
		FROM
			member
		WHERE		
			id = #{id}	
	</select>
	
	<select id="selectMemberList" parameterType="com.hello.helloSpring.common.bean.MemberBean">
		SELECT 
			member_no AS memberNo
			, id
			, pw
			, name
			, email
			, addr
			, birthdate
			, hp
			, reg_dt AS regDt
			, last_login_dt AS lastLoginDt
		FROM
			member
		WHERE		
			name LIKE CONCAT('%', #{name},'%')
	</select>
	
	<insert id="insertMember" parameterType="com.hello.helloSpring.common.bean.MemberBean">
		insert into 
			member (
				id
				, pw
				, name
				, email
				, addr
				, birthday
				, hp
			) 
		values (
			#{id}
			, #{pw}
			, #{name}
			, #{email}
			, #{addr}
			, #{birthday}
			, #{hp} 
		)
	</insert>

	<!-- 수정 -->	
	<update id="updateMember" parameterType="com.hello.helloSpring.common.bean.MemberBean">
		update 
			member 
		set 
			reg_dt = now()
			<if test="name != null and name != ''">
				, name = #{name}
			</if>
			<if test="email != null and email != ''">
				, email = #{email}
			</if>
			<if test="addr != null and addr != ''">
				, addr = #{addr}
			</if>
			<if test="birthday != null and birthday != ''">
				, birthday = #{birthday}
			</if>
			<if test="hp != null and hp != ''">
				, hp = #{hp}
			</if>
		where 
			id = #{id}
	</update>

	<!-- 삭제 -->
	<delete id="deleteMember" parameterType="com.hello.helloSpring.common.bean.MemberBean">
		delete from 
			member
		where
			id = #{id}
	</delete>

</mapper>